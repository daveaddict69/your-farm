local TweenService = game:GetService("TweenService")
local CoreGui = game:GetService("CoreGui")
local UserInputService = game:GetService("UserInputService")

local isOpen = true
local scriptRunning = false

pcall(function()
    CoreGui:FindFirstChild("DavislyHub_GUI"):Destroy()
    CoreGui:FindFirstChild("DavislyHub_SPLASH"):Destroy()
end)

local splashGui = Instance.new("ScreenGui")
splashGui.Name = "DavislyHub_SPLASH"
splashGui.IgnoreGuiInset = true
splashGui.ResetOnSpawn = false
splashGui.Parent = CoreGui

local bg = Instance.new("Frame", splashGui)
bg.Size = UDim2.new(1,0,1,0)
bg.BackgroundColor3 = Color3.new(0,0,0)
bg.BackgroundTransparency = 0

local title = Instance.new("TextLabel", bg)
title.Size = UDim2.new(0,400,0,70)
title.Position = UDim2.new(0.5,-200,0.45,-40)
title.BackgroundTransparency = 1
title.Text = "DAVISLY HUB"
title.Font = Enum.Font.GothamBlack
title.TextSize = 50
title.TextColor3 = Color3.fromRGB(0, 170, 255)
title.TextTransparency = 0

local sub = Instance.new("TextLabel", bg)
sub.Size = UDim2.new(0,400,0,30)
sub.Position = UDim2.new(0.5,-200,0.45,30)
sub.BackgroundTransparency = 1
sub.Text = "Premium Scripts"
sub.Font = Enum.Font.Gotham
sub.TextSize = 18
sub.TextColor3 = Color3.fromRGB(200, 200, 200)
sub.TextTransparency = 0

local loading = Instance.new("TextLabel", bg)
loading.Size = UDim2.new(0,250,0,25)
loading.Position = UDim2.new(0,10,1,-35)
loading.BackgroundTransparency = 1
loading.Text = "Initializing Davisly Hub..."
loading.Font = Enum.Font.Gotham
loading.TextSize = 14
loading.TextXAlignment = Enum.TextXAlignment.Left
loading.TextColor3 = Color3.fromRGB(120,120,120)
loading.TextTransparency = 0

local skip = Instance.new("TextButton", bg)
skip.Size = UDim2.new(0,80,0,30)
skip.Position = UDim2.new(1,-90,1,-40)
skip.Text = "SKIP"
skip.Font = Enum.Font.GothamBold
skip.TextSize = 14
skip.TextColor3 = Color3.new(1,1,1)
skip.BackgroundColor3 = Color3.fromRGB(60,60,60)
skip.BorderSizePixel = 0
Instance.new("UICorner", skip)

local closed = false
local function closeSplash()
	if closed then return end
	closed = true
	splashGui:Destroy()
end

skip.MouseButton1Click:Connect(closeSplash)

task.wait(3)

if not closed then
	local info = TweenInfo.new(1.5, Enum.EasingStyle.Sine, Enum.EasingDirection.Out)

	TweenService:Create(bg, info, {BackgroundTransparency = 1}):Play()
	TweenService:Create(title, info, {TextTransparency = 1}):Play()
	TweenService:Create(sub, info, {TextTransparency = 1}):Play()
	TweenService:Create(loading, info, {TextTransparency = 1}):Play()
	TweenService:Create(skip, info, {
		TextTransparency = 1,
		BackgroundTransparency = 1
	}):Play()

	task.wait(1.6)
	closeSplash()
end

local player = game.Players.LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "DavislyHub_GUI"
gui.Parent = player:WaitForChild("PlayerGui")
gui.ResetOnSpawn = false

local mainFrame = Instance.new("Frame")
mainFrame.Parent = gui
mainFrame.Size = UDim2.new(0, 250, 0, 300)
mainFrame.Position = UDim2.new(0.05, 0, 0.5, -150)
mainFrame.BackgroundColor3 = Color3.fromRGB(30, 30, 40)
mainFrame.BorderSizePixel = 0
mainFrame.Active = true
mainFrame.Draggable = true

local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 8)
corner.Parent = mainFrame

local topBar = Instance.new("Frame")
topBar.Parent = mainFrame
topBar.Size = UDim2.new(1, 0, 0, 40)
topBar.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
topBar.BorderSizePixel = 0

local topCorner = Instance.new("UICorner")
topCorner.CornerRadius = UDim.new(0, 8)
topCorner.Parent = topBar

local titleLabel = Instance.new("TextLabel")
titleLabel.Parent = topBar
titleLabel.Size = UDim2.new(0.7, 0, 1, 0)
titleLabel.Position = UDim2.new(0.05, 0, 0, 0)
titleLabel.BackgroundTransparency = 1
titleLabel.Text = "DAVISLY HUB"
titleLabel.Font = Enum.Font.GothamBold
titleLabel.TextSize = 18
titleLabel.TextColor3 = Color3.fromRGB(0, 170, 255)
titleLabel.TextXAlignment = Enum.TextXAlignment.Left

local closeBtn = Instance.new("TextButton")
closeBtn.Parent = topBar
closeBtn.Size = UDim2.new(0, 30, 0, 30)
closeBtn.Position = UDim2.new(1, -35, 0.5, -15)
closeBtn.Text = "X"
closeBtn.Font = Enum.Font.GothamBold
closeBtn.TextSize = 16
closeBtn.TextColor3 = Color3.fromRGB(255, 80, 80)
closeBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
closeBtn.BorderSizePixel = 0
Instance.new("UICorner", closeBtn)

local toggleBtn = Instance.new("TextButton")
toggleBtn.Parent = topBar
toggleBtn.Size = UDim2.new(0, 30, 0, 30)
toggleBtn.Position = UDim2.new(1, -70, 0.5, -15)
toggleBtn.Text = "_"
toggleBtn.Font = Enum.Font.GothamBold
toggleBtn.TextSize = 16
toggleBtn.TextColor3 = Color3.fromRGB(200, 200, 200)
toggleBtn.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
toggleBtn.BorderSizePixel = 0
Instance.new("UICorner", toggleBtn)

local contentFrame = Instance.new("Frame")
contentFrame.Parent = mainFrame
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundTransparency = 1

local executeBtn = Instance.new("TextButton")
executeBtn.Parent = contentFrame
executeBtn.Size = UDim2.new(1, 0, 0, 40)
executeBtn.Position = UDim2.new(0, 0, 0, 20)
executeBtn.Text = "EXECUTE"
executeBtn.Font = Enum.Font.GothamBold
executeBtn.TextSize = 16
executeBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
executeBtn.BackgroundColor3 = Color3.fromRGB(0, 120, 215)
executeBtn.BorderSizePixel = 0
Instance.new("UICorner", executeBtn)

local stopBtn = Instance.new("TextButton")
stopBtn.Parent = contentFrame
stopBtn.Size = UDim2.new(1, 0, 0, 40)
stopBtn.Position = UDim2.new(0, 0, 0, 70)
stopBtn.Text = "STOP"
stopBtn.Font = Enum.Font.GothamBold
stopBtn.TextSize = 16
stopBtn.TextColor3 = Color3.fromRGB(255, 255, 255)
stopBtn.BackgroundColor3 = Color3.fromRGB(215, 60, 60)
stopBtn.BorderSizePixel = 0
stopBtn.Visible = false
Instance.new("UICorner", stopBtn)

local statusLabel = Instance.new("TextLabel")
statusLabel.Parent = contentFrame
statusLabel.Size = UDim2.new(1, 0, 0, 25)
statusLabel.Position = UDim2.new(0, 0, 0, 120)
statusLabel.BackgroundTransparency = 1
statusLabel.Text = "Status: Ready"
statusLabel.Font = Enum.Font.Gotham
statusLabel.TextSize = 14
statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
statusLabel.TextXAlignment = Enum.TextXAlignment.Left

local infoLabel = Instance.new("TextLabel")
infoLabel.Parent = contentFrame
infoLabel.Size = UDim2.new(1, 0, 0, 60)
infoLabel.Position = UDim2.new(0, 0, 0, 150)
infoLabel.BackgroundTransparency = 1
infoLabel.Text = "Davisly Hub v1.0\nPremium Auto Farm Script\nPress RightControl to toggle GUI"
infoLabel.Font = Enum.Font.Gotham
infoLabel.TextSize = 12
infoLabel.TextColor3 = Color3.fromRGB(150, 150, 150)
infoLabel.TextXAlignment = Enum.TextXAlignment.Left
infoLabel.TextYAlignment = Enum.TextYAlignment.Top

closeBtn.MouseButton1Click:Connect(function()
    gui:Destroy()
end)

toggleBtn.MouseButton1Click:Connect(function()
    if isOpen then
        mainFrame.Size = UDim2.new(0, 250, 0, 40)
        contentFrame.Visible = false
        toggleBtn.Text = "+"
        isOpen = false
    else
        mainFrame.Size = UDim2.new(0, 250, 0, 300)
        contentFrame.Visible = true
        toggleBtn.Text = "_"
        isOpen = true
    end
end)

local function toggleGUI()
    if isOpen then
        mainFrame.Size = UDim2.new(0, 250, 0, 40)
        contentFrame.Visible = false
        toggleBtn.Text = "+"
        isOpen = false
    else
        mainFrame.Size = UDim2.new(0, 250, 0, 300)
        contentFrame.Visible = true
        toggleBtn.Text = "_"
        isOpen = true
    end
end

UserInputService.InputBegan:Connect(function(input, gameProcessed)
    if not gameProcessed and input.KeyCode == Enum.KeyCode.RightControl then
        toggleGUI()
    end
end)

local autoFarmThread
executeBtn.MouseButton1Click:Connect(function()
    if scriptRunning then return end
    
    scriptRunning = true
    executeBtn.Visible = false
    stopBtn.Visible = true
    statusLabel.Text = "Status: Running..."
    statusLabel.TextColor3 = Color3.fromRGB(0, 255, 0)
    
    autoFarmThread = task.spawn(function()
        while scriptRunning do
            for i = 1, 100 do
                if not scriptRunning then break end
                pcall(function()
                    game:GetService("ReplicatedStorage")
                        .Modules
                        .EventManagerClient
                        .ServerEvent
                        :FireServer("ClaimReward")
                end)
            end
            task.wait()
        end
    end)
end)

stopBtn.MouseButton1Click:Connect(function()
    if not scriptRunning then return end
    
    scriptRunning = false
    if autoFarmThread then
        task.cancel(autoFarmThread)
        autoFarmThread = nil
    end
    
    executeBtn.Visible = true
    stopBtn.Visible = false
    statusLabel.Text = "Status: Stopped"
    statusLabel.TextColor3 = Color3.fromRGB(255, 80, 80)
    
    task.wait(1)
    statusLabel.Text = "Status: Ready"
    statusLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
end)
